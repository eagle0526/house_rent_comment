<nav class="fixed top-0 left-0 z-50 w-full px-3 py-4 bg-white shadow md:flex md-items-center md:justify-between" data-controller="nav-bar">
  <div class="flex items-center justify-between w-full">
    <span class="text-2xl cursor-pointer">
      <%= link_to "租屋評價", root_path %>
    </span>
  <ul class="flex">
    <div class="flex">
      <div class="flex items-center">
        <% if current_user %>          
          <li>
            <%# 新增房屋區塊，下面那一行註解是最初的形式 %>
            <%#= link_to "新增房屋", admin_user_houses_path(current_user), class:"mr-2 text-lg hover:text-major" %>
            <%= link_to admin_user_houses_path(current_user) do %>
              <div class="flex items-center px-4 py-2 mx-2 border cursor-pointer hover:bg-blue-300">
                <i class="fa-solid fa-plus"></i>
              </div>
            <% end %>
          </li>
          <li>
            <%= link_to current_user.email, root_path, class:"mx-2 text-lg hover:text-major" %>
          </li>
          <li>
            <div class= "px-6 py-2 mx-3 border cursor-pointer hover:bg-gray-100", data-action="click->nav-bar#info">
              <div class="">
                <span>
                  <i class="fa-regular fa-user"></i>
                </span>
               <span>                   
                  <i class="fa-solid fa-caret-down"></i>
               </span>                 
              </div>

              <%# 以下是點開個人資料的區塊  %>
              <div class="absolute border top-[3.5em] right-[1.5em] bg-white hidden" data-nav-bar-target="information">                

                <%= link_to admin_user_houses_path(current_user) do %>
                  <div class="flex items-center px-8 py-4 border cursor-pointer hover:bg-blue-300">
                    <div class="w-1/3">
                      <i class="mr-5 fa-solid fa-house"></i>                
                    </div>
                    <div class="w-2/3">
                      <p>新增房屋</p>
                    </div>                                        
                  </div>
                <% end %>

                <%= link_to edit_admin_user_path(current_user.id) do %>
                  <div class="flex items-center px-8 py-4 border cursor-pointer hover:bg-blue-300">
                    <div class="w-1/3">
                      <i class="mr-5 fa-solid fa-book"></i>               
                    </div>
                    <div class="w-2/3">
                      <p>個人資料</p>
                    </div>                                        
                  </div>
                <% end %>
                
                <%= link_to destroy_user_session_path, data: {turbo_method: :delete} do  %>
                  <div class="flex items-center px-8 py-4 border cursor-pointer hover:bg-blue-300">
                    <div class="w-1/3">
                      <i class="mr-5 fa-solid fa-door-open"></i>               
                    </div>
                    <div class="w-2/3">
                      <p>登出</p>
                    </div>                                        
                  </div>
                <% end %> 
              </div>

            </div>          
          </li>          
        <% else %>
          <%# <li class= "mr-2 text-lg hover:text-major"> %>
            <%#= link_to '註冊', new_user_registration_path, class: "btn-primary" %>
          <%# </li> %>
          <%# <li class= "text-lg hover:text-major"> %>
            <%#= link_to '登入', new_user_session_path, class: "second-btn" %>
          <%# </li>   %>
          <li>
            <button class= "relative mx-3 navbar-btn", data-action="click->nav-bar#login">
              <p>註冊 / 登入</p>
            </button>          
          </li>


        <% end %>
      </div>
    </div>
  </ul>
</nav>








<!-- ads/popup.html.erb -->
<section class="hidden" data-controller="nav-pop-up"
                        data-nav-pop-up-target="page"
                        data-action="popup@window->nav-pop-up#showPop">
  <div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
    <%# <i class= "absolute text-xs fa-solid fa-x"></i> %>
    <!-- 背景是半透明的黑色蓋板廣告 -->
    <div class="relative p-20 bg-white rounded-lg w-96">

      <!-- 白色蓋板廣告的內容 -->

      <%# 關閉icon，因為是用絕對定位，所以今天如果改變白色框框的大小，叉叉icon都要再調整過 %>
      
      <%# <i class= "absolute text-xs fa-solid fa-x right-[47em] top-[25em] cursor-pointer" data-action="click->nav-pop-up#close"></i> %>
      <i class= "absolute text-xs cursor-pointer right-5 top-5 fa-solid fa-x" data-action="click->nav-pop-up#close"></i>
            
      
      <h2 class="mb-4 text-2xl font-bold">社群登入</h2>

      <%# 原始的登入code %>
      <%#= button_to "google登入", user_google_oauth2_omniauth_authorize_path, data: {turbo: "false"}, class: "btn-primary rounded-full w-full " %>    
          
      <%= button_to user_google_oauth2_omniauth_authorize_path, data: {turbo: "false"}, class: "google-login-btn" do %>        
        <div class="w-1/6 mr-8">
          <img src="/assets/google_logo.png" class="object-cover w-full h-full">
        </div>
        <div class="">
          <span>google登入</span>
        </div>                     
      <% end %>

    </div>
  </div>
</section>



